<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Networking</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> <!-- and it's easy to individually load additional languages --> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script> <script>hljs.highlightAll();</script> </head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_networking">Networking</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arten_von_sockets">Arten von Sockets</h3>

</div>
<div class="sect2">
<h3 id="_stream_sockets_tcp">Stream sockets (tcp)</h3>
<div class="paragraph">
<p>Zuverlässige Sockets bei denen es darauf ankommt, dass die Daten ankommen und auch in der Richtigen reinfolge ankommen.</p>
</div>
<div class="paragraph">
<p>Anwendungen:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>telnet</p>
</li>
<li>
<p>ssh</p>
</li>
<li>
<p>http</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All diese bauen auf eine Zuverlässige verbindung auf, welche in richtiger Reihenfolge sein muss.</p>
</div>
</div>
<div class="sect2">
<h3 id="datagram_socket_id">Datagram sockets (udp) - connectionless</h3>
<div class="paragraph">
<p>Daten in eine Packet kommen ohne fehler an, jedoch können die Packets nicht in richtiger Reihenfolge und nicht alle ankommen. So werden einfach nur daten an eine ip addresse geschickt ohne eine Richtige Verbindung offen zu halten. Desswegen auch connectionless.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tftp</p>
</li>
<li>
<p>dhpcd</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Diese Protokolle benutzen datagram sockets. Auch wenn diese ebenfalls genaue daten brauchen haben diese jewals ihr eigenes Protokoll um nicht erhaltene daten zu ermitteln und erneeut zu bekommen<br></p>
</div>
<div class="paragraph">
<p>Für spiele ist solch eine Daten zuverlässigkeit egal wesswegen man oft sowas einfach ignoriert.<br></p>
</div>
<div class="paragraph">
<p>Warum sollte man also eine unzuverlässigere verbindung nutzen ? Geschwindigkeit. Datagram sockets sind viel schneller. Für sowas wie die Übermittlung von Nachichten ist ein zuverlässige socket verbindung (tcp) viel besser, aber in einem Spiel wo mehrere male die Position eines Spielers gesendet werden muss ist es nicht Problematisch wenn packets nicht ankommen. Desswegen wird hier dann eine schnellere aber unzuverlässigere Verbindung genutzt.<br></p>
</div>
</div>
<div class="sect2">
<h3 id="_zusammenfasung">Zusammenfasung</h3>
<div class="paragraph">
<p>Welche gibt es ?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stream sockets(tcp)</p>
<div class="ulist">
<ul>
<li>
<p>Zuverlässig</p>
</li>
<li>
<p>Langsam</p>
</li>
</ul>
</div>
</li>
<li>
<p>Datagram sockets(udp)</p>
<div class="ulist">
<ul>
<li>
<p>Unzuverlässig</p>
</li>
<li>
<p>Schnell<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_osi_modell_netzwerk_theorie">OSI-Modell - Netzwerk theorie</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ügendwann mal hier was reinschreiben</p>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_ip_adressen_structs_und_data_munging">Ip Adressen, structs und Data Munging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ipv4_und_ipv6">Ipv4 und Ipv6</h3>
<div class="paragraph">
<p>Früher ipv4. Heute eher ipv6 wegen zu wenige Ip adressen</p>
</div>
<div class="paragraph">
<p>ipv6 ist in hexadecimal form. <a href="basics.html">Hex in Dezimal</a></p>
</div>
<div class="paragraph">
<p>ipv6 addressen mit nullen können komprimiert werden:</p>
</div>
<div class="paragraph">
<p>2001:0db8:c9d2:0012:0000:0000:0000:0051<br>
2001:db8:c9d2:12::51<br>
Auch ipv4 addressen können einfach als ipv6 adressen dargestellt werden:<br>
192.168.111.50<br>
::ffff:192.168.111.50</p>
</div>
</div>
<div class="sect2">
<h3 id="_subnetze">Subnetze</h3>
<div class="paragraph">
<p>Eine netmask gibt vor wie eine Ip addrese im Netzwerk aufgebaut wird.<br>
Ist die Ip = 192.168.111.123 und die Netzmaske = 255.255.255.0 so wäre die Ip adresse immer 192.168.111.xxx wobei die letzten drei den Host im Netzwerk beschreiben
'''</p>
</div>
</div>
<div class="sect2">
<h3 id="_port_nummern">Port nummern</h3>
<div class="paragraph">
<p>Ports dienen dazu eine Netzwerk verbindung zu einer bestimmten Anwendung zu zuordnen. Beispielsweise wäre die Ip dann die Straße zu einem Hochhaus und der Port die Nummer für die Wohnung.<br>
Wenn man zum Beispiel ein Mail und web service hat muss man die einkommenden Daten auch irgendwie zuordnen können.<br></p>
</div>
<div class="paragraph">
<p>Da es viele standard Protokolle gibt, gibt es ebenso standart port nummern die für bestimmte System anwendungen genutzt werden. z.b ssh=22, smtp=25 <a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">List of Ports</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_byte_order">Byte order</h3>
<div class="paragraph">
<p>Es gibt zwei wege eine zwei Byte hex nummer zu Speichern: b34f erst b3 dann 4f. Dies nennt man Big-Endian also in der Richtigen reihenfolge abspeichern. Manche computer (Intel) speichert die Daten andersrum also nach dem Little-Endian system.<br>
<br>
Der computer speichert nummern in Host Byte Order, wobei wieder zwischen Little-Endian und Big-Endian unterschieden wird. Desswegen muss sichergestellt werden das, wenn man packete erstellt, diese auch in der Richtigen order sind.<br>
<br>
Um das Problem zu lösen wird einfach angenommen das die Host byte order niemals richtig ist und man einfach eine Funktion aufruft um diese in die Richtige Netwrok Byte order bringt.<br>
<br>
Es gibt zwei Arten die Konvertiert werden können. Einmal ein short also zwei byte oder ein long also view Byte. Dementrsprechend heißt dann auch die Funktion also h für host dann to dann n for network und s for short also h-to-n-s</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">htons() // host to netowrk short
htonl() // host to network long
ntohs() // network to host short
ntohl() // network to host long</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structs">structs</h3>
<div class="paragraph">
<p><a href="basics.html">Struct</a><br>
Der Socket descriptor hat einfach den Typ int</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">struct addrinfo {
    int              ai_flags;     // AI_PASSIVE, AI_CANONNAME, etc.
    int              ai_family;    // AF_INET, AF_INET6, AF_UNSPEC
    int              ai_socktype;  // SOCK_STREAM, SOCK_DGRAM
    int              ai_protocol;  // use 0 for "any"
    size_t           ai_addrlen;   // size of ai_addr in bytes
    struct sockaddr *ai_addr;      // struct sockaddr_in or _in6
    char            *ai_canonname; // full canonical hostname

    struct addrinfo *ai_next;      // linked list, next node
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Diese Struct wird dann mithilfe von <em>getaddrinfo()</em> gefühllt. Desswegen brauch man das meistens gar nicht selber zu erstellen. Trozdem ist es wichtig die einzelne Bestandteile zu verstehen, da man diese lesen und eventuell auch selber ändern muss.
<br>
<br>
Man kann mit <em>ai_family</em> bestimmen of es sich um <em>ipv4 ipv6</em> handelt oder mit <em>AF_UNSPEC</em> es sich um beides handeln könnte.<br>
<br>
Wie man sieht ist <em>ai_addr</em> in <em>addrinfo</em> ein pointer zu einem <em>struct sockaddr</em>. Hier fängt es dann an ein bisschen komplizierter zu werden.<br></p>
</div>
<div class="paragraph">
<p>+
Der struct <em>sockaddr</em> entählt die Information der socket addresse.<br>
Um besser mit <em>struct sockaddr</em> umzgehen wurde das struct <em>sockaddr_in</em>. Dabei steht in für internet. Man kann immer <em>sockaddr_in in _sockaddr</em> umwandeln und anders rum. Auch wenn später von connect ein sock_addr gefordert wird kann man einfach <em>sockaddr_in</em> zu einem <em>sockaddr_in</em> casten: <em>(struct sockaddr*)sockaddr_in</em>.<br>
<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">// (IPv4 only--see struct sockaddr_in6 for IPv6)

struct sockaddr_in {
    short int          sin_family;  // Address family, AF_INET
    unsigned short int sin_port;    // Port number
    struct in_addr     sin_addr;    // Internet address
    unsigned char      sin_zero[8]; // Same size as struct sockaddr
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>This structure makes it easy to reference elements of the socket address. Note that sin_zero (which is included to pad the structure to the length of a struct sockaddr) should be set to all zeros with the function memset(). Also, notice that sin_family corresponds to sa_family in a struct sockaddr and should be set to “AF_INET”. Finally, the sin_port must be in Network Byte Order (by using htons()!)<br>
<br>
Das gleiche gibt es auch für ipv6:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">// (IPv6 only--see struct sockaddr_in and struct in_addr for IPv4)

struct sockaddr_in6 {
    u_int16_t       sin6_family;   // address family, AF_INET6
    u_int16_t       sin6_port;     // port number, Network Byte Order
    u_int32_t       sin6_flowinfo; // IPv6 flow information
    struct in6_addr sin6_addr;     // IPv6 address
    u_int32_t       sin6_scope_id; // Scope ID
};

struct in6_addr {
    unsigned char   s6_addr[16];   // IPv6 address
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ipv6 wird erstmal ausgelassen
Last but not least, here is another simple structure, struct sockaddr_storage that is designed to be large enough to hold both IPv4 and IPv6 structures. See, for some calls, sometimes you don’t know in advance if it’s going to fill out your struct sockaddr with an IPv4 or IPv6 address. So you pass in this parallel structure, very similar to struct sockaddr except larger, and then cast it to the type you need:</p>
</div>
<div class="paragraph">
<p>struct sockaddr_storage {
    sa_family_t  ss_family;     // address family</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    // all this is padding, implementation specific, ignore it:
    char      __ss_pad1[_SS_PAD1SIZE];
    int64_t   __ss_align;
    char      __ss_pad2[_SS_PAD2SIZE];
};</pre>
</div>
</div>
<div class="paragraph">
<p>What’s important is that you can see the address family in the ss_family field—check this to see if it’s AF_INET or AF_INET6 (for IPv4 or IPv6). Then you can cast it to a struct sockaddr_in or struct sockaddr_in6 if you wanna.<br></p>
</div>
</div>
<div class="sect2">
<h3 id="_ip_adressen_und_part_deux">Ip adressen und part deux</h3>
<div class="paragraph">
<p>Um eine Ip adresse umzuwandeln brauch man lediglich die funktion <em>inet_pton()</em>, welche eine Ip addresse in ein <em>struct in_addr</em> oder ein <em>struct in6_addr</em> umwandelt. Dabei steht pton für presentation to network:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">struct sockaddr_in sa;  //Ipv4
struct sockaddr_in sa6; //Ipv6

inet_pton(AF_INET, "10.12.110.57", &amp;(sa.sin_addr)); // IPv4
inet_pton(AF_INET6, "2001:db8:63b3:1::3490", &amp;(sa6.sin6_addr)); // IPv6</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Früher gab es die Funktion <em>inet_addr()</em> oder <em>inet_aton()</em> aber die werden nicht mehr benutzt und funktionieren auch nicht mit Ipv6)<br></p>
</div>
<div class="paragraph">
<p>Um das ganze Robuster zu machen muss man noch auf error achten. <em>inet_aton</em> gibt -1 bei einem Fehler wieder und 0 wenn die ip addresse nicht richtig ist. Also bevor man das benutzt sollte man checken ob der Rückgabewert größer als null ist.<br></p>
</div>
<div class="paragraph">
<p>Logischer weise kann man dann mit der Funktion <em>inet_ntop()</em> dann ein struct in_addr in ein string(char*) umwandeln, dabei wird wieder zwischen ipv6 und ipv4 unterschieden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">// IPv4:

char ip4[INET_ADDRSTRLEN];  // space to hold the IPv4 string
struct sockaddr_in sa;      // pretend this is loaded with something

inet_ntop(AF_INET, &amp;(sa.sin_addr), ip4, INET_ADDRSTRLEN);

printf("The IPv4 address is: %s\n", ip4);


// IPv6:

char ip6[INET6_ADDRSTRLEN]; // space to hold the IPv6 string
struct sockaddr_in6 sa6;    // pretend this is loaded with something

inet_ntop(AF_INET6, &amp;(sa6.sin6_addr), ip6, INET6_ADDRSTRLEN);

printf("The address is: %s\n", ip6);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>INET_ADDRSTRLEN</em> bzw <em>INET6_ADDRSTRLEN</em> ist einfach die maximale länge einer addresse. (Die alte funktion dafür war <em>inet_ntoa()</em> wird nicht mehr benutzt)<br></p>
</div>
<div class="paragraph">
<p>Diese funktionen funktionieren nur mit numerischen Ip adressen, somit werden hostnames wie "www.google.de" nicht akzeptiert. Das wird mit getaddrinfo() gemacht, aber dazu kommen wir erst später.</p>
</div>
</div>
<div class="sect2">
<h3 id="_private_netzwerke">Private Netzwerke</h3>
<div class="paragraph">
<p>In den Meisten Netzwerken gibt es eine Firewall, welche einerseits dazu dient das locale Netzwerk zu schützen als auch die Ip addressen innerhalb zu ip adressen auserhalb zu bersetzen. Dies wird <em>Network Adress Translation</em> oder auch NAT genannt.</p>
</div>
<div class="paragraph">
<p>Für üns spielt das aber an sich keine Rolle da das Automatisch gemacht wird. So bietet sich die Möglichkeit ein lokales Netwerk sicherer zu machen und besser aufzubauen. So gibt es auch bestimmte konventionen wie diese aufgebaut sind. Am häufigsten sind jedoch 10.x.x.x, 192.168.x.x, wobei für x 0-255 gilt und ein weniger normale ist 172.y.x.x, wobei für y 16-31 gilt <a href="https://datatracker.ietf.org/doc/html/rfc1918">hier</a>.</p>
</div>
<div class="paragraph">
<p>Netzwerke müssen so nicht aufgebaut sein, normalerweise sind sie es aber.</p>
</div>
<div class="paragraph">
<p>Lokale Netwerke spielen vorallem eine wichtige Rolle, da man vom ISP (internet anbieter) nur eine gewisse Anzahl an öffentlichen IP addressen zugeordnet bekommt. Und man ohne lokales Netzwerk nur dementrsprechend viele geräte im Netwerk haben können.</p>
</div>
</div>
<div class="sect2">
<h3 id="_wechsel_von_ipv4_auf_ipv6">Wechsel von Ipv4 auf IPv6</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_calls">System calls</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getaddrinfo_ein_anfang"><em>getaddrinfo()</em> - Ein Anfang</h3>
<div class="paragraph">
<p><em>getaddrinfo()</em> ist eine der Wichtigsten funktionen da diese uns dabei hilf unsere structs zu füllen und hilft uns mit DNS und service name lookups.</p>
</div>
<div class="paragraph">
<p>Wie ist die Funktion aufgebaut ?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;

int getaddrinfo(const char *node,     // e.g. "www.example.com" or IP
                const char *service,  // e.g. "http" or port number
                const struct addrinfo *hints,
                struct addrinfo **res);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der <em>node</em> Parameter ist einfach der hostname zu dem man sich verbinden will, z.B www.google.de.
 <em>serivce</em> kann entweder ein service sein (der <a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">hier</a>
 beschrieben wird oder der bei UNIX machine unter <em>/etc/services</em> steht) aber auch ein Port.</p>
</div>
<div class="paragraph">
<p>Für <em>hints</em> muss man lediglich ein <em>struct addrinfo</em> mit den nötigsten Informationen ausfüllen.
Als Beispiel nehmen wir einen server der sich mit der hostip und dem port 3490 verbinden möchte. (Das beispiel umfasst nur die erstellung der structs)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int status;
struct addrinfo hints;
struct addrinfo *servinfo;  // will point to the results

memset(&amp;hints, 0, sizeof hints); // make sure the struct is empty
hints.ai_family = AF_UNSPEC;     // don't care IPv4 or IPv6
hints.ai_socktype = SOCK_STREAM; // TCP stream sockets
hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

if ((status = getaddrinfo(NULL, "3490", &amp;hints, &amp;servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo error: %s\n", gai_strerror(status));
    exit(1);
}

// servinfo now points to a linked list of 1 or more struct addrinfos

// ... do everything until you don't need servinfo anymore ....

freeaddrinfo(servinfo); // free the linked-list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Da <em>ai_family</em> den Wert <em>AF_UNSPEC</em> hat sagen wir quasi das es egal ist ob ipv4 oder ipv6.</p>
</div>
<div class="paragraph">
<p>Hier nochmal ein Beispiel für einen Client der sich mit einen Server verbinden will:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int status;
struct addrinfo hints;
struct addrinfo *servinfo;  // will point to the results

memset(&amp;hints, 0, sizeof hints); // make sure the struct is empty
hints.ai_family = AF_UNSPEC;     // don't care IPv4 or IPv6
hints.ai_socktype = SOCK_STREAM; // TCP stream sockets

// get ready to connect
status = getaddrinfo("www.example.net", "3490", &amp;hints, &amp;servinfo);

// servinfo now points to a linked list of 1 or more struct addrinfos

// etc.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_socket_socket_descriptor"><em>socket()</em> - Socket descriptor</h3>
<div class="paragraph">
<p>Jetzt wird es zeit über den socket() system call zu reden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;

int socket(int domain, int type, int protocol);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hier muss man angeben welche art von Socket man braucht. Also Ipv4 oder Ipv6, stream or datagram und TCP oder Last updated</p>
</div>
<div class="paragraph">
<p>Füher wurde das alles gehardcoded, aber da wir <em>getaddrinfo()</em> haben geht das ganze viel einfacher.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int s;
struct addrinfo hints, *res;

// do the lookup
// [pretend we already filled out the "hints" struct]
getaddrinfo("www.example.com", "http", &amp;hints, &amp;res);

//hier sollte man immer nach error checken für getaddrinfo

s = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Socket gibt entweder ein Socket descriptor wieder den man dann später benutzen kann oder -1 wenn ein Fehler aufgetreten ist.
(Den fehler selbst kann man dann mit <em>errno</em> nachgucken [siehe hier])</p>
</div>
</div>
<div class="sect2">
<h3 id="_bind_auf_welchem_port_bin_ich"><em>bind()</em> - Auf welchem Port bin ich ?</h3>
<div class="paragraph">
<p>Wenn man ein Socket hat muss man diesen auch noch mit einem port mit dem eigenen Pc verbinden. Wenn man nur ein <em>connect()</em> macht ist bind nicht nötig.
Wichitg ist das z.B für spiele wenn man eine Verbindung zu einem bestimmten host aufbaun soll mit einem bestimmten port damit das system die Daten zu dem richtigen Socket descriptor zuordnen kann.</p>
</div>
<div class="paragraph">
<p>Bind ist wie folgt aufgebaut:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;

int bind(int sockfd, struct sockaddr *my_addr, int addrlen);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockfd</em> ist der Socket Socket descriptor. <em>my_addr</em> is einfach ein pointer zu einem <em>struct sockaddr</em>, welcher die informationen über die adresse, port und Ip adresse entählt.
<em>addrlen</em> is einfach die Länge in bytes der adresse.
Ein beispiel das ein Socket zu einem host binden mit dem port 3490:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">struct addrinfo hints, *res;
int sockfd;

// first, load up address structs with getaddrinfo():

memset(&amp;hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;  // use IPv4 or IPv6, whichever
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

getaddrinfo(NULL, "3490", &amp;hints, &amp;res);

// make a socket:

sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);

// bind it to the port we passed in to getaddrinfo():

bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</code></pre>
</div>
</div>
<div class="paragraph">
<p>By using the AI_PASSIVE flag, I’m telling the program to bind to the IP of the host it’s running on. If you want to bind to a specific local IP address, drop the AI_PASSIVE and put an IP address in for the first argument to getaddrinfo().</p>
</div>
<div class="paragraph">
<p>bind() also returns -1 on error and sets errno to the error’s value.</p>
</div>
<div class="paragraph">
<p>Wichtig ist zu beachten das, wenn man bind() benutzt man nur ports über 1024 benutzt, da diese alle <strong>reserviert</strong> sind.
So kann man alle ports ab 1024 bis 65535 benutzen, so lange sie nicht von anderen Programmen benutzt werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="connect_id"><em>connect()</em></h3>
<div class="paragraph">
<p><em>connect()</em> ist wie folgt aufgebaut:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;

int connect(int sockfd, struct sockaddr *serv_addr, int addrlen);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockfd</em> ist der Socket descriptor, <em>serv_addr</em> ist ein struct vom typ <em>struct sockaddr</em> der den destination port und Ip adresse entählt und <em>addrlen</em> ist die länge in bytes von der server adressen strukutr.</p>
</div>
<div class="paragraph">
<p>All die Parameter können wieder mit hilfe von <em>getaddrinfo()</em> gesetzt werden.</p>
</div>
<div class="paragraph">
<p>Als Beispiel machen wir jetzt eine socket connection zu dem "www.example.com" mit dem Port 3490.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">struct addrinfo hints, *res;
int sockfd;

// first, load up address structs with getaddrinfo():

memset(&amp;hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;

getaddrinfo("www.example.com", "3490", &amp;hints, &amp;res);

// make a socket:

sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);

// connect!

connect(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hier muss man auch wieder darauf achten nach fehlern zu checken. <em>connect()</em> gibt -1 wieder bei einem Fehler und setzt die Variable <em>errno</em>.</p>
</div>
<div class="paragraph">
<p>Wie man sieht benutzen wir hier <em>bind</em> nicht, da es nicht wichtig ist welchen lokalen port nummer wir benutzen weil es nur wichtig ist welchen host port wir benutzen.
Der lokale port wird uns dann vom system automatisch zugewiesen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_listen_kann_mich_bitte_jemand_rufen"><em>listen()</em> - Kann mich bitte jemand rufen ?</h3>
<div class="paragraph">
<p>Wenn man auf einkommende verbindungen warten möchte muss man <em>listen()</em> und <em><a href="#accept_id">accept()</a></em> verwenden.
<em>listen()</em> ist wie folgt aufgebaut:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int listen(int sockfd, int backlog);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockfd</em> ist wieder der Socket descriptor und backglog ist die erlaubte Anzahl an eingehende verbindung in der Connection queue, welche solange warten bis sie mit <em><a href="#accept_id">accept()</a></em> akzeptiert werden.
Die meisten system erlauben eine maximale Anzahl von 20, aber 5 oder 10 sollte ausreichend sein.</p>
</div>
<div class="paragraph">
<p>So wie üblich gibt listen -1 zurrück wenn ein Fehler aufgetreten ist und setzt die Variable errno.</p>
</div>
<div class="paragraph">
<p>In diesem fall muss man auch bind benutzten damit der client weiß zu welchem Port sie sich verbinden sollen bzw. damit dieser einheitlich ist und nicht zufällig zugehordnet wird, wie es ohne bind der Fall wäre.
So muss die Sequenz der System calls wie folgt aussehen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">getaddrinfo();
socket();
bind();
listen();
/* accept() goes here */</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der schwierige part dabei ist das <em><a href="#accept_id">accept()</a></em> aber da kommen wir jetzt zu.</p>
</div>
</div>
<div class="sect2">
<h3 id="accept_id"><em>accept()</em> - Danke das du 3490 gewählt hast</h3>
<div class="paragraph">
<p>Nehmen wir mal an jemand von weiter weg will sich mit <em><a href="#connect_id">connect()</a></em> mit deinem Computer mit einem bestimmten Port verbinden. Seine connection wird dann in die connection queue eingefügt und wartet darauf
aktzeptiert zu werden mit hilfe von <em>accept()</em>. <em>accept()</em> gibt dann ein neuen Socket descriptor nur für die einzelne Verbindung zurrück. Mit dem neuen Socket descriptor können wir dann <em><a href="#send_id">send()</a></em> und <em><a href="#recieve_id">recv()</a></em> benutzen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">_accpet()_ sieht wie folgt aus:
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;

int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockdf</em> ist der <em>listen()</em> Socket descriptor. <em>addr</em> ist normalerweise ein pointer zu einem localen <em>struct sockaddr_storage</em>, wo die Informationen über die einkommende Verbindung gespeichert werden.<em>addrlen</em> ist ein localer integer welcher zu <em>sizeof(struct sockaddr_storage)</em> gesetzt werden sollte, bevor man <em>accept()</em> aufruft.</p>
</div>
<div class="paragraph">
<p>So wie üblich gibt <em>accept()</em> eine -1 bei einem Fehler wieder und setzt die ernno variable.</p>
</div>
<div class="paragraph">
<p>Hier ein kleines Beispiel <strong>ohne</strong> error checking:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;

#define MYPORT "3490"  // the port users will be connecting to
#define BACKLOG 10     // how many pending connections queue will hold

int main(void)
{
    struct sockaddr_storage their_addr;
    socklen_t addr_size;
    struct addrinfo hints, *res;
    int sockfd, new_fd;

    // !! don't forget your error checking for these calls !!

    // first, load up address structs with getaddrinfo():

    memset(&amp;hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;  // use IPv4 or IPv6, whichever
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

    getaddrinfo(NULL, MYPORT, &amp;hints, &amp;res);

    // make a socket, bind it, and listen on it:

    sockfd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);
    bind(sockfd, res-&gt;ai_addr, res-&gt;ai_addrlen);
    listen(sockfd, BACKLOG);

    // now accept an incoming connection:

    addr_size = sizeof their_addr;
    new_fd = accept(sockfd, (struct sockaddr *)&amp;their_addr, &amp;addr_size);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wenn man nur eine Verbindung erwartet dann kann <em>sockfd</em> mit close auch wieder geschlossen werden</p>
</div>
</div>
<div class="sect2">
<h3 id="_send_und_recv_kommunikation_zwischen_client_und_server"><em>send()</em> und <em>recv()</em> - Kommunikation zwischen client und server</h3>
<div class="paragraph">
<p>Diese beide Funktionen sind essentiel für die Verbindung ziwschen client und server.
Für <a href="#datagram_socket_id">unconnected datagram sockets</a> sind andere Funktionen wichtig. Die Funktionen <a href="#sendto_id"><em>sendto()</em></a> und <a href="#recvfrom_id"><em>recvfrom()</em></a>.</p>
</div>
<div class="sect3">
<h4 id="send_id"><em>send()</em></h4>
<div class="paragraph">
<p>Aufbau:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int send(int sockfd, const void *msg, int len, int flags);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockfd</em> ist der Socket descriptor der benutzt werden soll um die Daten zu senden. <em>msg</em> ist ein pointer zu den Daten die man senden will und len ist die länge der Daten in bytes die gesendet werden sollen.
<em>flags</em> kann einfach zu 0 gesetzt werden.</p>
</div>
<div class="paragraph">
<p>Beispiel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">char *msg = "Beej was here!";
int len, bytes_sent;
.
.
.
len = strlen(msg);
bytes_sent = send(sockfd, msg, len, 0);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wichtig zu wissen ist, dass send nur so viel daten schickt wie es möglich ist und somit die rückgabe also <em>bytes_send</em>
kleiner sein könnte als die Länge die man angegeben hat. Desswegen muss man die restlichen daten, wenn übrig nochmal senden.
Aber ein packet das kleiner als 1K ist sollte kein Problem darstellen.</p>
</div>
<div class="paragraph">
<p>Hier auch wieder bei -1 als Rückgabe ist ein Fehler aufgetreten und errno wird ebenfalls gesetzt.</p>
</div>
</div>
<div class="sect3">
<h4 id="recieve_id"><em>recv()</em></h4>
<div class="paragraph">
<p><em>recv()</em> ist relativ gleich aufgebaut:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">int recv(int sockfd, void *buf, int len, int flags);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>sockfd</em> ist der socket descriptor von dem gelesen werden soll, <em>buf</em> ist der buffer in dem die gelesen Information gespeichert wird.
<em>len</em> ist die maximale länge des buffers,<em>flags</em> kann hier auch einfach wieder auf 0 gesetzt werden.</p>
</div>
<div class="paragraph">
<p><em>recv()</em> gibt die tatsächliche größe der gelesen bytes wieder.</p>
</div>
<div class="paragraph">
<p>Hier auch wieder bei -1 als Rückgabe ist ein Fehler aufgetreten und errno wird ebenfalls gesetzt.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sendto_und_recvfrom_kommunikation_mit_connectionless_sockets">_sendto() und recvfrom() - Kommunikation mit connectionless Sockets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quelle: <a href="https://beej.us/guide/bgnet/html//index.html#what-is-a-socket" class="bare">beej.us/guide/bgnet/html//index.html#what-is-a-socket</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-10-24 05:44:45 UTC
</div>
</div>
</body>
</html>